
# –ú–æ–¥–µ–ª–∏ –æ–ø—Ä–æ—Å–æ–≤ (Poll, PollVote, PollMessage)

## üìã Poll - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ–ø—Ä–æ—Å–æ–≤
**–¢–∞–±–ª–∏—Ü–∞:** `polls`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
| –ü–æ–ª–µ | –¢–∏–ø | Nullable | Default | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|---------|----------|
| id | INTEGER | ‚ùå | auto | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| poll_id | VARCHAR(50) | ‚ùå | - | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| question | TEXT | ‚ùå | - | –í–æ–ø—Ä–æ—Å |
| creator_id | INTEGER | ‚ùå | - | FK ‚Üí users.id |
| creator_name | VARCHAR(255) | ‚ùå | - | –ò–º—è —Å–æ–∑–¥–∞—Ç–µ–ª—è |
| options | JSONB | ‚ùå | - | –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ |
| total_votes | INTEGER | ‚úÖ | 0 | –í—Å–µ–≥–æ –≥–æ–ª–æ—Å–æ–≤ |
| is_active | BOOLEAN | ‚úÖ | true | –ê–∫—Ç–∏–≤–µ–Ω |
| expires_at | TIMESTAMP | ‚úÖ | NULL | –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è |

## üìã PollVote - –≥–æ–ª–æ—Å–∞
**–¢–∞–±–ª–∏—Ü–∞:** `poll_votes`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
| –ü–æ–ª–µ | –¢–∏–ø | Nullable | Default | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|---------|----------|
| id | INTEGER | ‚ùå | auto | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| poll_id | INTEGER | ‚ùå | - | FK ‚Üí polls.id |
| user_id | INTEGER | ‚ùå | - | FK ‚Üí users.id |
| option_index | INTEGER | ‚ùå | - | –ò–Ω–¥–µ–∫—Å –≤–∞—Ä–∏–∞–Ω—Ç–∞ |
| voted_at | TIMESTAMP | ‚úÖ | now() | –í—Ä–µ–º—è –≥–æ–ª–æ—Å–∞ |

## üìã PollMessage - —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–ø—Ä–æ—Å–∞–º–∏
**–¢–∞–±–ª–∏—Ü–∞:** `pollmsgs`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
| –ü–æ–ª–µ | –¢–∏–ø | Nullable | Default | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|---------|----------|
| id | INTEGER | ‚ùå | auto | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| poll_id | INTEGER | ‚ùå | - | FK ‚Üí polls.id |
| tg_poll_id | VARCHAR(50) | ‚ùå | - | ID –≤ Telegram |
| user_id | INTEGER | ‚ùå | - | FK ‚Üí users.id |

## üîó –°–≤—è–∑–∏
```python
# Poll
creator = relationship("User")
votes = relationship("PollVote", back_populates="poll")

# PollVote
poll = relationship("Poll", back_populates="votes")
user = relationship("User")

# –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞: –û–ø—Ä–æ—Å—ã –∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

## –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–æ–≤
1. –ö—Ç–æ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å: –¢–æ–ª—å–∫–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ä–æ—Å–∞:
   - –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
   - –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

## –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
1. –ö—Ç–æ –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å:
   - –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–∏–¥–∏–º–æ—Å—Ç–∏

2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
   - –û–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –¢–æ–ª—å–∫–æ –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø—Ä–æ—Å–∞—Ö
   - –¢–æ–ª—å–∫–æ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
1. –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –æ–ø—Ä–æ—Å—ã:
   - –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫—Ç–æ –∫–∞–∫ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
